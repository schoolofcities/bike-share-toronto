<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="./favicon.svg" />
	<meta name="viewport" content="width=device-width" />
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	
	
		<link href="./_app/immutable/assets/8.e4e3171a.css" rel="stylesheet">
		<link href="./_app/immutable/assets/global-styles.df6275ba.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.4ee0cd5b.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.762ca461.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/singletons.125f4f48.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.982367e1.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.a8f27727.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/layout.bc1f5fb0.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/4.15fd16e8.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/8.4a578692.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/top-logo-full.85e1d8e3.js"><title>Bike Share Toronto Trip Map | School of Cities</title><!-- HEAD_svelte-y8lkdj_START --><meta name="description" content="Estimating and visualizing routes for every Bike Share trip in Toronto in 06/2024"><meta name="author" content="Jeff Allen"><meta property="og:title" content="Bike Share Toronto Trip Map"><meta property="og:description" content="Estimating and visualizing routes for every Bike Share trip in Toronto in 06/2024"><meta property="og:type" content="website"><meta property="og:url" content="https://schoolofcities.github.io/bike-share-toronto/trips-062024/"><meta property="og:image" content="https://schoolofcities.github.io/bike-share-toronto/web-card-trips.png"><meta property="og:locale" content="en_CA"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="https://schoolofcities.github.io/bike-share-toronto/trips-062024/"><meta name="twitter:creator" content="@UofTCities"><meta name="twitter:title" content="Bike Share Toronto Trip Map"><meta name="twitter:description" content="Estimating and visualizing routes for every Bike Share trip in Toronto in 06/2024"><meta name="twitter:image" content="https://schoolofcities.github.io/bike-share-toronto/web-card-trips.png"><!-- HEAD_svelte-y8lkdj_END -->

</head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XB09CWTEWB"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-XB09CWTEWB');
</script>
<body>
	<div style="display: contents">






<div id="bar" class="svelte-vg44cj"><div id="logo" class="svelte-vg44cj"><a href="https://www.schoolofcities.utoronto.ca/" class="svelte-vg44cj"><img src="/bike-share-toronto/_app/immutable/assets/top-logo-full.769ffd6d.svg" alt="School of Cities" class="svelte-vg44cj"></a></div>
	</div>

<main class="svelte-vg44cj"><div class="title svelte-vg44cj"><h1 class="svelte-vg44cj">Mapping Bike Share Trips In Toronto </h1>
		<p class="svelte-vg44cj">Estimating and mapping routes for every Bike Share trip in Toronto in 06/2024 based on origin-destination ridership data and a cycling network graph. 762,760 trips in total! Click on the map to view at a higher resolution.</p>
		<p class="svelte-vg44cj"><a href="http://jamaps.github.io" target="_blank" class="svelte-vg44cj">Jeff Allen</a> / <a href="https://www.schoolofcities.utoronto.ca/" target="_blank" class="svelte-vg44cj">School of Cities</a></p></div>

	<div class="big-map svelte-vg44cj"><a href="/bike-share-toronto/bike-share-trip-map-june2024-3600x2300.png" class="svelte-vg44cj"><img src="/bike-share-toronto/bike-share-trip-map-june2024-3600x2300.png" class="svelte-vg44cj"></a></div>

	<div class="text svelte-vg44cj"><h2 class="svelte-vg44cj">Why &amp; How</h2>
		<p class="svelte-vg44cj">There has been substantial <a href="./growth" class="svelte-vg44cj">growth</a> in Bike Share ridership in Toronto over the past few years. We recently wanted to A) improve our understanding about <i>where</i> people use Bike Share and B) estimate the characteristics of these trips (network distance, speed, elevation gain/loss, etc.) to use in future analyses on how people cycle in the city.
		</p>
		<p class="svelte-vg44cj">From Bike Share Toronto, we graciously received a dataset which included a record for every trip in June 2024. There were 764,177 records in this dataset. 762,760 of these represented normal trips that were not terminated shortly after a bike was unlocked and returned to the same station.
		</p>
		<p class="svelte-vg44cj">Each record in the dataset includes the date and the time of the trip, and which station that each trip started and ended at. Here&#39;s a map of every station in June 2024.
		</p></div>
	<div class="small-map svelte-vg44cj"><img src="/bike-share-toronto/trips-june2024-stations.png" class="svelte-vg44cj"></div>
	<div class="text svelte-vg44cj"><p class="svelte-vg44cj">Each record in this dataset also had attributes like the type of bike (electric or classic) and type of user (annual member or pay-per-ride). But we didn&#39;t know the route taken, the distance of the trip along this route, and the elevation gain or loss. These are key for understanding the nuances of where, how, and why people ride. We set out to estimate this additional information with the help of open data and software. 
		</p>
		<p class="svelte-vg44cj">To do this, we needed a queryable <a href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)" target="_blank" class="svelte-vg44cj">graph</a> representing the cycling network in the City of Toronto. We created this using data from <a href="https://www.openstreetmap.org/#map=14/43.6586/-79.3833" target="_blank" class="svelte-vg44cj">OpenStreetMap</a> and <a href="https://www.openstreetmap.org/#map=14/43.6586/-79.3833" target="_blank" class="svelte-vg44cj">GraphHopper</a>, an open source network analysis software, to build a routable network graph that works off a local computer. From this network graph we can make queries, similar to Google Maps, where we input the start location and end location, and ask the graph to return us the most likely route taken alongside information on trip duration, distance, and change in elevation. This route query takes into account a variety of attributes. For example designated cycling trails away from cars, like the Waterfront Trail, have greater priority; while busy car-centric roads without cycling infrastructure have less priority. 
		</p>
		<p class="svelte-vg44cj">Here&#39;s an example output for a short trip.
		</p>
		<img src="/bike-share-toronto/single-trip.png" class="svelte-vg44cj">	
		<p class="svelte-vg44cj">The upshot is that since we have this data and software stored locally, is that we can do calculations at scale, i.e. estimate 1,000s of routes like this in just a few seconds.
		</p>
		<p class="svelte-vg44cj">One tricky consideration is what to do for trips that begin and end at the same docking station. If we input the same start and end location into the network graph, it will return a trip of length = 0. But in reality, these are trips that people will likely ride somewhere and then cycle back to where they started, often for leisure rather than other purposes. Since we don&#39;t know where they actually travel to, we used a random number generator to estimate a location within a 5km radius of the starting Bike Share station. This of course is a bit arbitrary, but was based on our best guess on how far most people would bike from/to a single location for leisure. We made a couple exceptions to this for the stations with the most of these out-and-back leisure trips, which were along the waterfront and the base of the Leslie Spit. For these we constrained this random number generator to locations on the Leslie Spit, the Waterfront, and Toronto Island depending on the location of the docking station. 
		</p>
		<p class="svelte-vg44cj">The output of this data crunching allowed us to create the visualization at the top of this page, created by overlaying all 762,760 routes onto a single map. There were a couple of visual tricks here to help the visualization. We add some noise to the path geometry (i.e. randomly jittered coordinates a bit) and then visualized each trip as a very very very thin line. The goal here was to help highlight segments of greater travel flow when there are many trips along a corridor. Here&#39;s a super zoomed in view to a bundle of trips on the Danforth near Pape.
		</p>
		<img src="/bike-share-toronto/many-trips.png" class="svelte-vg44cj">
		<p class="svelte-vg44cj">The map at the top of this page was prepped in <a href="https://qgis.org/" target="_blank" class="svelte-vg44cj">QGIS</a> and then tinkered with in <a href="https://www.gimp.org/" target="_blank" class="svelte-vg44cj">GIMP</a> using a combination of colour and filter settings. A mean curvature blur and a bloom filter were used to try to highlight more well-traveled paths. GIMP is a bit of a rabbit hole; one can tinker with colours and effects for hours. Below are a couple interesting outputs, first is pixelate and cartoon filters to create a gridded heat map, the second using a mean curvature blur with many more iterations to create a watercolour effect.
		</p>
		<p class="svelte-vg44cj">Anyways, that&#39;s it for now, thanks for viewing / reading! We&#39;ll be doing some analysis on how riders use EV bikes compared to classic bikes (do they take longer trips? more likely to travel uphill?), and hopefully have something to share on that front in a couple months or so.
		</p></div>

	<div class="small-map svelte-vg44cj"><img src="/bike-share-toronto/trips-june2024-grid.png" class="svelte-vg44cj">
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<img src="/bike-share-toronto/trips-june2024-watercolour.png" class="svelte-vg44cj"></div>

	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>

</main>


			
			<script>
				{
					__sveltekit_jv14mv = {
						assets: "/bike-share-toronto",
						base: new URL(".", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null,null];

					Promise.all([
						import("./_app/immutable/entry/start.4ee0cd5b.js"),
						import("./_app/immutable/entry/app.982367e1.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 4, 8],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
</body>

</html>